{% extends "base.html" %}
{% block title %}–ú–æ–∏ —á–∞—Ç—ã{% endblock %}

{% block content %}
<h3 class="mb-3">üí¨ –ú–æ–∏ —á–∞—Ç—ã</h3>

{% if items %}
  <ul class="list-group" id="chat-list">
    {% for item in items %}
      {% if item.other %}
        <li class="list-group-item">
          <a href="{% url 'chat:chat_with' item.other.id %}" class="text-decoration-none text-reset d-flex align-items-center">
            <img src="{{ item.other_photo|default:'https://via.placeholder.com/48' }}" class="rounded-circle me-3" width="48" height="48" alt="">
            <div class="flex-grow-1">
              <div class="d-flex align-items-center">
                <strong class="me-2">{{ item.other.first_name }} {{ item.other.last_name }}</strong>
                {% if item.unread_count > 0 %}
                  <span class="badge bg-danger">{{ item.unread_count }}</span>
                {% endif %}
              </div>
              <small class="text-muted">{{ item.last_message_preview }}</small>
            </div>
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
{% else %}
  <p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–æ–∫.</p>
{% endif %}
{% endblock %}
